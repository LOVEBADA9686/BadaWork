package a.b.c.com.kbd.notice.dao;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.util.ArrayList;

import a.b.c.com.common.ConnProperty;
import a.b.c.com.kbd.book.vo.BookVO;
import a.b.c.com.kbd.notice.sql.NoticeSqlMap;
import a.b.c.com.kbd.notice.vo.NoticeVO;

public class NoticeDAOImpl implements NoticeDAO {

	@Override
	public ArrayList<NoticeVO> noticeSelectAll() {
		// TODO Auto-generated method stub
		System.out.println("NoticeDAOImpl.noticeSelectAll() 함수 진입 ");
		
		Connection conn = null;
		PreparedStatement pstmt = null;
		ResultSet rsRs = null;
		
		ArrayList<NoticeVO> aList = null;
		
		try{
			
			conn = ConnProperty.getConnection();
			pstmt = conn.prepareStatement(NoticeSqlMap.getNoticeSelectAllQuery());
			
			System.out.println("전제조회 \n" + NoticeSqlMap.getNoticeSelectAllQuery());
			
			rsRs = pstmt.executeQuery();
			
			if (rsRs !=null){
				
				aList = new ArrayList<NoticeVO>();
				
			}
			
		}
		return null;
	}

	@Override
	public ArrayList<NoticeVO> noticeSelect(NoticeVO nvo) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public int noticeInsert(NoticeVO nvo) {
		// TODO Auto-generated method stub
		System.out.println("NoticeDAOImpl NoticeInsert 함수 진입() >>> : ");
		NoticeVO.printlnNoticeVO(nvo);
		
		Connection conn = null;
		PreparedStatement pstmt = null;
		int nCnt = 0;
		
		try{
			conn = ConnProperty.getConnection();
			System.out.println("conn.getAutoCommit() >>> : " + conn.getAutoCommit());
			
			pstmt = conn.prepareStatement(NoticeSqlMap.getNoticeInsertQuery());
			System.out.println("입력하기 >>> : \n" + NoticeSqlMap.getNoticeInsertQuery());
			
			pstmt.clearParameters();
			pstmt.setString(1, nvo.getNnum());
			pstmt.setString(2, nvo.getNsubject());
			pstmt.setString(3, nvo.getNmemo());
			pstmt.setString(4, nvo.getNphoto());
			
			nCnt = pstmt.executeUpdate();
			if(!conn.getAutoCommit()) conn.commit();
			System.out.println("nCnt >>> : " + nCnt + "건 등록 되었음");
			
			ConnProperty.conClose(conn, pstmt);
		}catch(Exception e) {
			System.out.println("디비 입력에 문제가 생겼습니다. >>> : " + e);
		}finally{
			try{
				ConnProperty.conClose(conn, pstmt);
			}catch(Exception e2){}
		}
		return nCnt;
	}

	@Override
	public int noticeUpdate(NoticeVO nvo) {
		// TODO Auto-generated method stub
		return 0;
	}

	@Override
	public int noticeDelete(NoticeVO nvo) {
		// TODO Auto-generated method stub
		return 0;
	}

}
